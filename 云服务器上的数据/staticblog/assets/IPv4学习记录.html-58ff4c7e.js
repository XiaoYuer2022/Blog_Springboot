import{$ as e,a0 as I,a1 as c,a6 as P,a2 as s,a3 as p,a4 as t,a9 as l,a5 as i,I as n}from"./framework-e783454b.js";const g={},r=s("div",{class:"hint-container tip"},[s("p",{class:"hint-container-title"},"提示"),s("p",null,"IPv4学习记录")],-1),d={href:"https://space.bilibili.com/360996402/channel/seriesdetail?sid=1721882",target:"_blank",rel:"noopener noreferrer"},m=i('<p>1、IPv4地址概述 分为三个历史阶段：分类编址、划分子网和五分类编址三个阶段。</p><p>2、分类编址的IPv4地址 <img src="https://s3.bmp.ovh/imgs/2022/10/11/7a8cc0531f1d06f7.png" alt="图1" loading="lazy"><img src="https://s3.bmp.ovh/imgs/2022/10/11/a1a7e6a41ac812a8.png" alt="图2" loading="lazy"><img src="https://s3.bmp.ovh/imgs/2022/10/11/76aa90cdc5048e17.png" alt="图3" loading="lazy"><img src="https://s3.bmp.ovh/imgs/2022/10/11/813f395e6ae9d19c.png" alt="图4" loading="lazy"><img src="https://s3.bmp.ovh/imgs/2022/10/11/859076c54f7efad2.png" alt="图5" loading="lazy"></p><p>3、划分子网</p>',3),h=s("p",null,"网络地址：仅包含网络号，主机号全部清零后的IP地址",-1),u=s("p",null,"给定一个分类的IP和对应的子网掩码，就可以知道子网划分的细节：",-1),_=s("ul",null,[s("li",null,"划分区子网的数量"),s("li",null,"每个子网可分配IP的数量"),s("li",null,"每个子网的网络地址和广播地址"),s("li",null,"每个子网可分配的最小和最大地址")],-1),f=s("p",null,"例：已知某个网络的地址是218.75.230.0，使用子网掩码255.255.255.192对其进行子网划分，请给出划分细节。 解析：",-1),v=s("p",null,[p("首先，A类网是1 ~ 126，127作为本地回环地址，不指派。B类网是128 ~ 191，C类网是192 ~ 223，D类网是组播地址，E类网保留未使用。还有0号开头的为网络IP地址，127开头的为本地回环测试地址，不对外使用。10/8开头的、172.16/12开头和192.168/16的IP自由分配，可做局域网IP使用。 "),s("img",{src:"https://s3.bmp.ovh/imgs/2022/10/12/b3644b1fd443eb7a.png",alt:"图",loading:"lazy"})],-1),b={href:"https://www.iana.org/assignments/iana-ipv4-special-registry/iana-ipv4-special-registry.xhtml",target:"_blank",rel:"noopener noreferrer"},N=i('<p>其次，题中的218为C类地址，网络号占3个字节（24bits），主机号占一个字节（8bits），子网掩码没设定的话，默认为255.255.255.0，而题目中为255.255.255.192,其中192的二进制为1100 0000，即网络号由26位bits构成，主机号由6位bits构成，如果用CIDR斜线记法表示为218.75.230.0/26。</p><p>可划分子网数量2<sup>2</sup>=4个子网，每个子网可分配IP地址数量为2<sup>(8-2)</sup>-2=2<sup>6</sup>-2=62个。 <img src="https://s3.bmp.ovh/imgs/2022/10/12/e689726999c60be1.png" alt="图6" loading="lazy"></p><p>4、无分类的IPv4地址</p><p>划分子网划分子网在一定程度上缓解了因特网在发展中晕倒的瓶颈，但是数量巨大的C类网因为其地址空间太小而没有得到充分的利用。</p><p>为此，因特网工程任务组有提出了采用无分类编制的方法解决IP地址紧张的问题。无分类域间路由选择CIDR</p><p>CIDR消除了划分IP地址分类和划分子网的概念，可以更有效地分配IPv4的地址空间。CISR采用斜线记法，即在IP地址后面写上斜线，斜线后加上网络前缀的数量。</p><p>我们只要知道CIDR地址块中的任何一个地址，就可以知道该地址块的全部细节：</p><ul><li>地址块的最小地址</li><li>地址块的最大地址</li><li>地址块的地址数量</li><li>地址块聚合某类网络（A类、B类或C类）的数量</li><li>地址掩码（也可继续称为子网掩码）</li></ul>',8),C=i("<p>所以，总共有2<sup>(32-20)</sup>=4096个IP地址,因为是聚合C类网，主机号：网络号=24:8，所以，每个子网的IP地址数量为2<sup>8</sup>个地址，聚合C类网的数量为总IP地址数量除以单个子网IP地址数量，即为2<sup>(32-20)</sup> / 2<sup>8</sup> =2<sup>12</sup> / 2<sup>8</sup> = 2<sup>4</sup>=16个聚合C类子网。 将主机号全部取零，得到最小地址128.14.32.0；将主机号全部取1，得到最大地址128.14.47.255。</p>",1),y=s("br",null,null,-1),z=i('<p>举例：在子网192.168.4.0/30中，能接受目的地址为192.168.4.3的IP分组的最大主机数为：____ 解析：</p><p>子网192.168.4.0，即：192.168.0000 0100.0000 0000 ，其中192.168.4.0000 00位网络号，最后两位00表示主机号，所以主机数量为4，但是主机号为0的主机只能做源IP地址，不能做目的IP地址；主机号全为1的地址，只能做广播地址，所以符合条件的主机号为2。</p><p>最长前缀匹配(最佳匹配)：使用 CIDR 时，路由表中的每个项目由 &quot;网络前缀&quot; 和 &quot;下一跳地址&quot; 组成。在查询路由表时可能会得到不止一个匹配结果。应当从匹配结果中选择具有最长网络前缀的路由，因为网络前缀越长，其地址块越小，因此路由就越具体。</p><p><strong>路由聚合的优点</strong>：减小路由规模，加快路由匹配速度；降低路由更新时的流量开销。</p><p>注意：</p><p>(1) 划分子网只是把IP地址的主机号这部分进行再划分，而不是改变IP地址原来的网络号。因此，从一个IP地址本身或IP数据报的首部，并无法判断源主机或目的主机所连接的网络是否进行了子网划分。</p><p>(2) 对分类的IPv4地址进行子网划分时，子网号不能为全0或全1。但随着CIDR的广泛使用，现在全0和全1的子网号也可以使用了。</p><p>(3) 无论是分类IPv4地址还是CIDR，其子网中的主机号为全0或全1的地址都不能被指派。</p><p>5、IPv4的应用规划 定长的子网掩码FLSM / 变长的子网掩码VLSM 举例：使用定长的子网掩码FLSM方式来将218.75.230.0进行子网划分： <img src="https://s3.bmp.ovh/imgs/2022/10/12/caf1ef498ee2d87c.png" alt="图" loading="lazy"> 解析：</p>',9),A=s("img",{src:"https://s3.bmp.ovh/imgs/2022/10/12/fe7eb0646e3b1f63.png",alt:"",loading:"lazy"},null,-1),D=i('<figure><img src="https://s3.bmp.ovh/imgs/2022/10/12/11e458750a1cc671.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>显然，使用定长的子网掩码来进行分组会极大地浪费IP，故而采用变长的子网掩码分组，按需使用IP。</p><p>使用变长的子网掩码VLSM --- IP： 218.75.230.0/24 分析题目中各个局域网的情况： N1：6台主机，一个路由器，一个网络IP(全0)，一个广播IP(全1)，一共9个IP N2：25台主机，需要28个IP N3：12台主机，需要15个IP N4：10台主机，需要13个IP N5：0个主机，两个路由器，一个网络地址，一个广播地址，一共4个IP</p><p>分配结果： N1：9个IP，用4个主机号表示，即：/28 N2：28个IP，用5个主机号表示，即：/27 N3：15个IP，用4个主机号表示，即：/28 N4：13个IP，用4个主机号表示，即：/28 N5：4个IP，用2个主机号表示，即：/30 最终，从地址块中划分出5个子网地址块：1个/27地址块，3个/28地址块，1个/30地址块。先从主机号最多的子网开始分配。 N2：28个IP，子网地址块218.75.230.0 ~ ~ 218.75.230.31 N1：9个IP，子网地址块218.75.230.32 ~ ~ 218.75.230.47 N3：15个IP，子网地址块218.75.230.48 ~ ~ 218.75.230.63 N4：13个IP，子网地址块218.75.230.64 ~ ~ 218.75.230.79 N5：4个IP，子网地址块218.75.230.80 ~ ~ 218.75.230.83 其他子网地址块待分配 <img src="https://s3.bmp.ovh/imgs/2022/10/12/d0e1a20bba0a0c96.png" alt="" loading="lazy"><img src="https://s3.bmp.ovh/imgs/2022/10/12/0d6b104fe4c200a5.png" alt="" loading="lazy"></p><p>6、第52讲：IP数据包的发送和转发过程 <img src="https://s3.bmp.ovh/imgs/2022/10/12/63899dae2a42cd37.png" alt="" loading="lazy"> IP路由器工作在TCP/IP体系结构的网际层（或称IP层），TCP/IP体系结构的网际层并不负责可靠传输，也就是不能确保传输的IP分组不丢失。IP路由器会对收到的IP分组头进行差错校验，当发现错误是会丢弃并报告源主机。</p><p>IP数据报的发送和转发过程包含以下两部分： 主机发送IP数据报；路由器转发IP数据报。 <img src="https://s3.bmp.ovh/imgs/2022/10/12/aa24315f888d2a56.png" alt="" loading="lazy"></p><p><strong>FAQ</strong> 1、怎么判断发送主机IP和目的主机IP处于同一网络？ 答：发送主机将自身掩码与自身IP相与，得到自己所处的网络地址；然后发送主机将自己掩码与目的主机在相与，得到目的主机在该掩码下的网络地址。</p><p>如果两个网络地址相同，则表示处于同一网段，同一网段的主机可以直接通信，这是“直接交付”。</p><p>如果两个网络地址不同，则IP数据报先交给局域网的网关，听过路由表查询前往目的主机IP的下一跳，然后离开本局域网，前往下一跳的局域网，最终达到目的主机，这是“间接交付”。</p><p>2、路由器怎么根据IP数据报的目的地址，在路由表中查找匹配的条目呢？ 答：①路由器先从数据报中得到源地址和目的地址； ②路由器根据其接口以及用户手动配置的路由表，可以得到所有的目的网络（如下图所示）。 <img src="https://s3.bmp.ovh/imgs/2022/10/12/a72362ec7a303a1a.png" alt="" loading="lazy"> ③将目的地址与路由表中的地址掩码相与，得到目的网络地址，然后检查得到的这个目的网络地址与路由表中的目的网络地址是否相同，相同就转发。 <img src="https://s3.bmp.ovh/imgs/2022/10/12/1513533a674d6acf.png" alt="" loading="lazy"></p><figure><img src="https://s3.bmp.ovh/imgs/2022/10/12/1e84edfd2f92a8c6.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>注意！局域网下的广播数据包交付给路由器后，路由器不会转发。也正因此，路由器可以有效地遏制网络风暴。</p><p>中继器和集线器工作在物理层，既不隔离冲突域，也不隔离广播域； 网桥和交换机（多端口网桥）工作在数据链路层，可以隔离冲突域，不能隔离广播域。 路由器工作在网络层，既隔离冲突域，也隔离广播域。</p><p>7、第53讲：静态路由的配置及其可能产生的路由环路问题 略 注意，手动添加路由表时，可以指定笼统的目的网络（即多个网络IP，取其相同数据的位，然后后面用斜线加数字来表示），可以指定特定的主机路由，例如192.168.1.1/32，可以指定默认路由0.0.0.0。但是需要注意，网络前缀越长，路由越具体；网络前缀越短，路由越模糊。多条路由可选时。最长前缀匹配！</p><p>8、第60讲：虚拟专用网络VPN和网络地址转换NAT 以下三个地址块可以设置为局域网IP： <img src="https://s3.bmp.ovh/imgs/2022/10/12/f99009b18204f73f.png" alt="" loading="lazy"> NAT：网络地址转换，当专用网内部的主机已经分配了本地IP，但又想和因特网上的主机通信时，可使用NAT方法。这种方法需要安装NAT软件，且该软件至少拥有一个有效的公网IP，当本地地址想与外界通信时，都要在NAT路由器上将本地地址转换成临时的公网全球IP地址。</p>',15);function x(R,T){const o=n("ExternalLinkIcon"),a=n("font");return I(),c("div",null,[r,P(" more "),s("p",null,[s("a",d,[p("参考资料"),t(o)]),p(" B站up主：湖科大教书匠，计算机网络微课堂，第47-53讲，加上第60讲。 1、第47讲：IPv4地址概述 2、第48讲：分类编址的IPv4地址（分为ABCDE五类） 3、第49讲：划分子网的IPv4地址 4、第50讲：无分类编址的IPv4地址（无分类域间路由选择CIDR、斜线记法） 5、第51讲：IP地址的应用规划 6、第52讲：IP数据包的发送和转发过程 7、第53讲：静态路由的配置及其可能产生的路由环路问题 8、第60讲：虚拟专用网络VPN和网络地址转换NAT")]),m,s("p",null,[p("将划分子网的IP地址与相对应的子网掩码进行逻辑与运算就可得到IPv4地址所在"),t(a,{color:"red"},{default:l(()=>[p("子网的网络地址")]),_:1}),p("。")]),h,u,_,f,v,s("p",null,[p("前往"),s("a",b,[p("IANA官网"),t(o)]),p("查看IPv4分配细节。")]),N,s("p",null,[p("例：请给出CIDR地址块128.14.35.7/20的全部细节（最小地址，最大地址，地址数量，聚合C类网数量，地址掩码） 解析： 20位网络号，所以子网掩码为255.255.240.0，(B类IP，16bits网络号，16bits主机号) IPv4地址：128.14.35.7 = "),t(a,{color:"red"},{default:l(()=>[p("1000 0000. 0000 1110. 0010 ")]),_:1}),p("0011. 0000 0111 掩码： 255.255.240.0 = 1111 1111. 1111 1111. 1111 0000. 0000 0000 逻辑按位与的结果为： "),t(a,{color:"red"},{default:l(()=>[p("1000 0000. 0000 1110. 0010")]),_:1}),p(" 0000. 0000 0000 = 128.14.32.0")]),C,s("p",null,[p("无分类编址的IPv4地址还可以用来构成超网：路由聚合 举例：172.1.4.0/25 172.1.4.128/25"),y,p(" 172.1.5.0/24 172.1.6.0/24 172.1.7.0/24 找网络号的共同前缀：主要在于第三个字节： 172.1.4.0/25 --> 172.1.0000 0100.0 172.1.4.128/25 -> 172.1.0000 0100.128 172.1.5.0/24 --> 172.1.0000 0101.0 172.1.6.0/24 --> 172.1.0000 0110.0 172.1.7.0/24 --> 172.1.0000 0111.0 找共同前缀-----> 172.1.4.0/22 注意，"),t(a,{color:"red"},{default:l(()=>[p("在网关路由中，网络前缀越长，地址块越小，路由越具体")]),_:1}),p("。若路由器查表转发分组时发现有多条路由可选，则选择网络前缀最长的那条，这称为"),t(a,{color:"red"},{default:l(()=>[p("最长前缀匹配")]),_:1}),p("。")]),z,s("p",null,[p("题目内容如上图所示，用定长的子网掩码来进行子网划分，考虑到N2子网数最多，为28台，并且218为C类网络，网络号24位，主机号为8位。综上，从8个主机号中划分5个做主机号，可满足最多32个主机，符合题目要求；剩余3个做子网号，可满足最多8个子网，满足题目中5个子网的要求。最终，定长子网划分结果如下： 子网划分依据： 218.75.230. 000"),t(a,{color:"red"},{default:l(()=>[p("0 0000")]),_:1}),p(" N1： 218.75.230.1 ~ ~ 218.75.230.9 （9个IP） N2： 218.75.230.33 ~ ~ 218.75.230.60 (28个IP) N3： 218.75.230.65 ~ ~ 218.75.230.79 （15个IP） N4： 218.75.230.97 ~ ~ 218.75.230.109 (13个IP) N5： 218.75.230.129 ~ ~ 218.75.230.132 （4个IP) "),A]),D])}const B=e(g,[["render",x],["__file","IPv4学习记录.html.vue"]]);export{B as default};
